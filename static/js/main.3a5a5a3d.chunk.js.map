{"version":3,"sources":["assets/undraw-search.svg","components/SearchBar/Styles.js","hoc/Auxiliary.js","components/SearchBar/Input.js","container/Styles.js","components/ResultBox/Styles.js","components/ResultBox/ResultBox.js","components/Loading/Styles.js","components/Loading/Loading.js","api/api.js","container/App.js","index.js"],"names":["module","exports","DivBar","Styled","div","Input","input","Button","button","Aux","props","children","className","onChange","changed","placeholder","onClick","search","Div","centralized","Error","h1","DivResult","show","Img","img","DivTitle","RoundedDiv","result","icon","title","data","Loading","loading","text","Math","floor","random","length","headers","Accept","App","state","city","benefited","reais","cityCode","error","errorInRequest","searchBenefitedByMonth","setMonth","url","axios","get","then","res","benefitedInThatMonth","quantidadeBeneficiados","reaisInThatMonth","valor","setState","catch","err","errorRequest","requestBenefited","months","i","searchCityCode","clearString","id","e","target","value","replacedString","toLowerCase","replace","this","src","require","alt","toLocaleString","style","currency","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3a5a5a3d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/undraw-search.cc5062b1.svg\";","import Styled from \"styled-components\";\r\n\r\nexport const DivBar = Styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px;\r\n  border-radius: 30px;\r\n  background-color: #F1F1F8;\r\n  color: #49536B;\r\n  box-shadow: 0px 0px 8px #858CA2;\r\n\r\n  @media(max-width: 450px){\r\n    width: 75%;\r\n  }\r\n\r\n  .SearchIcon{\r\n    color: #49536B;\r\n    font-size: 1.6rem;\r\n    margin: 0px 6px;\r\n  }\r\n`;\r\n\r\nexport const Input = Styled.input`\r\n  outline: none;\r\n  border: none;\r\n  font-size: 1.2rem;\r\n  background-color: transparent;\r\n  color: #49536B;\r\n  padding: 0 5px;\r\n  margin: 0 8px;\r\n  width: inherit;\r\n\r\n  &::placeholder{\r\n    color: #BCBCC8;\r\n  }\r\n`;\r\n\r\nexport const Button = Styled.button`\r\n  outline: none;\r\n  color: #49536B;\r\n  border: transparent;\r\n  padding: 3px 8px;\r\n  border-radius: 50px;\r\n  background-color: white;\r\n  height: 2.5rem;\r\n  width: 6rem;\r\n  font-weight: bold;\r\n  box-shadow: 0px 0px 5px #858CA2;\r\n\r\n  &:hover{\r\n    cursor: pointer;\r\n  }\r\n`;\r\n","const Aux = (props) => props.children;\r\n\r\nexport default Aux;\r\n","import React from \"react\";\r\nimport { DivBar, Input, Button } from \"./Styles\";\r\nimport Aux from \"../../hoc/Auxiliary\";\r\n\r\nconst input = (props) => (\r\n  <Aux>\r\n    <DivBar>\r\n      <i className=\"fas fa-search SearchIcon\"></i>\r\n      <Input onChange={props.changed} placeholder=\"São Paulo\" />\r\n      <Button onClick={props.search}>Pesquisar</Button>\r\n    </DivBar>\r\n  </Aux>\r\n);\r\n\r\nexport default input;\r\n","import Styled from \"styled-components\";\r\n\r\nexport const Div = Styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: ${(props) => (props.centralized ? \"center\" : \"flex-start\")};\r\n  flex-direction: column;\r\n  height: 100vh;\r\n`;\r\n\r\nexport const Error = Styled.h1`\r\n  color: #eb4034;\r\n  font-size: 1.2rem;\r\n  padding: 5px;\r\n`;\r\n\r\nexport const DivResult = Styled.div`\r\n  position: relative;\r\n  margin-top: 16px;\r\n  display: ${(props) => (props.show ? \"flex\" : \"none\")};\r\n\r\n  @media(max-width: 680px){\r\n    flex-direction: column;\r\n    margin-top: 32px;\r\n    width: 90%;\r\n  }\r\n`;\r\n\r\nexport const Img = Styled.img`\r\n  width: 100%;\r\n  height: 150px;\r\n  margin: 30px;\r\n`;\r\n","import Styled from \"styled-components\";\r\n\r\nexport const DivTitle = Styled.div`\r\n  border-radius: 8px;\r\n  box-shadow: 0px 0px 5px #858CA2;\r\n  padding: 28px;\r\n  display: flex;\r\n  justify-items: center;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  margin: 8px;\r\n`;\r\n\r\nexport const RoundedDiv = Styled.div`\r\n  width: 90px;\r\n  height: 90px;\r\n  background-color: #fff;\r\n  border-radius: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-shadow: 0px 0px 2px #858CA2;\r\n  font-size: 2.5rem;\r\n  \r\n  .fa-users{\r\n    color: #5978CE;\r\n  }\r\n\r\n  .fa-coins{\r\n    color: #ceb159;\r\n  }\r\n\r\n  .fa-venus{\r\n    color: #ce5967;\r\n  }\r\n\r\n`;\r\n","import React from \"react\";\r\nimport { DivTitle, RoundedDiv } from \"./Styles\";\r\n\r\nconst result = (props) => (\r\n  <DivTitle>\r\n    <RoundedDiv>\r\n      <i className={`${props.icon}`}></i>\r\n    </RoundedDiv>\r\n    <p>{props.title}</p>\r\n    <p>{props.data}</p>\r\n  </DivTitle>\r\n);\r\n\r\nexport default result;\r\n","import Styled from \"styled-components\";\r\n\r\nexport const Loading = Styled.div`\r\n  position: absolute;\r\n  background-color: rgba(0,0,0,0.5);\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: ${(props) => (props.show ? \"flex\" : \"none\")};\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  color: #ffffa3;\r\n\r\n  .fa-spinner{\r\n    color: #eded28;\r\n    animation: spinning 1s infinite; \r\n    font-size: 2.5rem; \r\n  }\r\n\r\n  @keyframes spinning {\r\n    from{\r\n      transform: rotate(0deg);\r\n    }\r\n    to{\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Loading } from \"./Styles\";\r\n\r\nconst loading = (props) => {\r\n  const text = [\r\n    \"As requisições podem demorar um pouco.\",\r\n    \"Buscando informações sobre a cidade...\",\r\n    \"Isso pode demorar um minuto.\",\r\n    \"Acessando o portal transparência.\",\r\n  ];\r\n\r\n  return (\r\n    <Loading show={props.show}>\r\n      <i className=\"fas fa-spinner\"></i>\r\n      <p>{text[Math.floor(Math.random() * text.length)]}</p>\r\n    </Loading>\r\n  );\r\n};\r\n\r\nexport default loading;\r\n","const headers = {\r\n  Accept: \"*/*\",\r\n  \"chave-api-dados\": \"5aecd3bc98d291bef3a214c8ec827981\",\r\n  \"Content-Type\": \"application/json\",\r\n};\r\n\r\nexport default headers;\r\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Input from \"../components/SearchBar/Input\";\nimport { Div, Error, DivResult, Img } from \"./Styles\";\nimport Result from \"../components/ResultBox/ResultBox\";\nimport Load from \"../components/Loading/Loading\";\n\n// File added in gitignore\nimport headers from \"../api/api\";\n\n// https://servicodados.ibge.gov.br/api/v1/localidades/municipios/{NomeCidade}\n// http://www.portaltransparencia.gov.br/api-de-dados/auxilio-emergencial-por-municipio?mesAno={202006}&codigoIbge={3132206}&pagina=1\n\n//Documentação\n//http://www.portaltransparencia.gov.br/swagger-ui.html#!/Aux237lio32emergencial/auxilioEmergencialPorMunicipioUsingGET\n\n//São Paulo === sao-paulo\n\nclass App extends Component {\n  state = {\n    city: null,\n    benefited: 0,\n    reais: 0,\n    cityCode: null,\n    error: false,\n    errorInRequest: 0,\n  };\n\n  searchBenefitedByMonth = (setMonth, cityCode) => {\n    const url = `https://cors-anywhere.herokuapp.com/http://www.portaltransparencia.gov.br/api-de-dados/auxilio-emergencial-por-municipio?mesAno=${setMonth}&codigoIbge=${cityCode}&pagina=1`;\n\n    axios\n      .get(url, { headers })\n      .then((res) => {\n        let benefitedInThatMonth = res.data[0].quantidadeBeneficiados;\n        let benefited = this.state.benefited + benefitedInThatMonth;\n\n        let reaisInThatMonth = res.data[0].valor;\n        let reais = this.state.reais + reaisInThatMonth;\n\n        this.setState({\n          benefited,\n          reais,\n        });\n      })\n      .catch((err) => {\n        // Não existem dados dos meses 06 e 07\n        // Logo, 2 erros de tipo não encontrado podem ser ignorados\n        let errorRequest = this.state.errorInRequest;\n\n        this.setState({\n          errorInRequest: errorRequest + 1,\n        });\n\n        if (errorRequest > 2) {\n          this.setState({\n            error: true,\n          });\n        }\n      });\n  };\n\n  requestBenefited = () => {\n    const months = [\"202004\", \"202005\", \"202006\", \"202007\"];\n    const cityCode = this.state.cityCode;\n\n    for (var i = 0; i < months.length; i++) {\n      this.searchBenefitedByMonth(months[i], cityCode);\n    }\n  };\n\n  searchCityCode = () => {\n    let city = this.state.city;\n\n    if (city !== null) {\n      city = this.clearString(city);\n      const url = `https://servicodados.ibge.gov.br/api/v1/localidades/municipios/${city}`;\n\n      axios\n        .get(url)\n        .then((result) => {\n          // Se não retornar um array vazio, fazer request\n          if (result.data.length !== 0) {\n            if (this.state.error) {\n              this.setState({ error: false });\n            }\n\n            this.setState({\n              cityCode: result.data.id,\n              errorInRequest: 0,\n            });\n\n            this.requestBenefited();\n          } else {\n            this.setState({\n              error: true,\n            });\n          }\n        })\n        .catch((error) => {\n          this.setState({\n            error: true,\n          });\n        });\n\n      // Reset pra não acumular\n      this.setState({\n        benefited: 0,\n        reais: 0,\n      });\n    }\n  };\n\n  changed = (e) => {\n    const city = e.target.value;\n\n    this.setState({\n      city,\n    });\n  };\n\n  clearString = (text) => {\n    const invalidChars = \"áàãâéèêëìíîïóõòôùúûüç\";\n    const validChars = \"aaaaeeeeiiiioooouuuuc\";\n\n    var replacedString = text.toLowerCase().replace(/ /g, \"-\");\n\n    for (var i = 0; i < invalidChars.length; i++) {\n      replacedString = replacedString.replace(invalidChars[i], validChars[i]);\n    }\n\n    return replacedString;\n  };\n\n  loading = null;\n\n  render() {\n    return (\n      <Div centralized={this.state.benefited === 0}>\n        <Img\n          src={require(\"../assets/undraw-search.svg\")}\n          alt=\"Illustration search box\"\n        />\n\n        {this.state.error ? <Error>Cidade não encontrada</Error> : null}\n\n        <Input changed={(e) => this.changed(e)} search={this.searchCityCode} />\n\n        <Load\n          show={\n            this.state.benefited === 0 &&\n            this.state.cityCode !== null &&\n            this.state.error === false\n          }\n        />\n\n        <DivResult show={this.state.benefited > 0}>\n          <Result\n            icon=\"fas fa-users\"\n            title=\"Total de beneficiados:\"\n            data={this.state.benefited}\n          />\n\n          <Result\n            icon=\"fas fa-coins\"\n            title=\"Reais distribuídos:\"\n            data={this.state.reais.toLocaleString(\"pt-br\", {\n              style: \"currency\",\n              currency: \"BRL\",\n            })}\n          />\n\n          <Result\n            icon=\"fas fa-venus\"\n            title=\"Chefes de família:\"\n            data={(this.state.reais - this.state.benefited * 600) / 600}\n          />\n        </DivResult>\n      </Div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./container/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}